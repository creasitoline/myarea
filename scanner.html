<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body { margin: 0; background: #000; color: white; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; }
        #reader { width: 100%; flex: 1; }
        .controls { padding: 20px; text-align: center; background: #222; }
        button { padding: 10px 20px; background: red; color: white; border: none; border-radius: 8px; }
    </style>
</head>
<body>
    <div id="reader"></div>
    <div class="controls"><button onclick="window.parent.postMessage({type:'qr-close'}, '*')">CHIUDI</button></div>
    <script>
        const scanner = new Html5Qrcode("reader");
        scanner.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, 
        (text) => { window.parent.postMessage({type:'qr-success', code: text}, '*'); });
    </script>
</body>
</html>
